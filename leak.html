<!doctype html>
<html lang="id">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>LeakIX Search Indo</title>
<style>
body {
  background: #0d0f12;
  color: #e5e9f0;
  font-family: Arial, sans-serif;
  margin: 0;
  padding: 0;
}
header {
  background: #111419;
  padding: 15px;
  text-align: center;
  font-size: 20px;
  font-weight: bold;
  border-bottom: 1px solid #1c1f25;
}
.container {
  max-width: 900px;
  margin: auto;
  padding: 15px;
}
input, button, select {
  padding: 8px;
  border-radius: 5px;
  border: none;
}
input {
  width: 100%;
  background: #1a1d23;
  color: #e5e9f0;
  border: 1px solid #2a2d33;
}
button {
  background: #f39c12;
  color: #000;
  font-weight: bold;
  cursor: pointer;
}
button:hover {
  background: #d68b0f;
}
.result {
  background: #15181d;
  border: 1px solid #1e2127;
  padding: 10px;
  margin: 8px 0;
  border-radius: 5px;
}
.meta {
  font-size: 12px;
  color: #999;
}
</style>
</head>
<body>
<header>üîç LeakIX Search Indo</header>
<div class="container">
  <label>Query:</label>
  <input id="query" type="text" value='country:ID site:.id filename:config.php'>
  <br><br>
  <button onclick="searchLeakIX()">Search</button>
  <div id="status"></div>
  <div id="results"></div>
</div>

<script>
const API_KEY = "xvcDcIvxtxXBK0XKXEHvEqLS0WXw_RiswNcAL5cT4d0amsRh";

async function searchLeakIX() {
  const q = document.getElementById("query").value.trim();
  if (!q) return alert("Masukkan query!");
  document.getElementById("status").innerHTML = "‚è≥ Mencari...";
  document.getElementById("results").innerHTML = "";

  // URL asli LeakIX
  const scope = "leak";
  const url = `https://leakix.net/search?scope=${encodeURIComponent(scope)}&q=${encodeURIComponent(q)}`;

  try {
    // Gunakan corsproxy.io untuk bypass CORS di GitHub Pages
    const corsUrl = `https://corsproxy.io/?${encodeURIComponent(url)}`;

    const res = await fetch(corsUrl, {
      headers: { "accept": "application/json", "api-key": API_KEY }
    });

    if (!res.ok) throw new Error("HTTP " + res.status);
    const data = await res.json();

    if (!data.hits || data.hits.length === 0) {
      document.getElementById("status").innerHTML = "‚ùå Tidak ada hasil.";
      return;
    }

    document.getElementById("status").innerHTML = `‚úÖ Ditemukan ${data.hits.length} hasil:`;
    const resultsDiv = document.getElementById("results");

    data.hits.forEach(item => {
      const div = document.createElement("div");
      div.className = "result";
      div.innerHTML = `
        <b>${item.url || item.hostname || "No URL"}</b>
        <div class="meta">${item.country || "-"} | ${item.dataset || item.type || ""}</div>
        <small>${item.path || ""}</small>
        <details><summary>Detail</summary><pre>${JSON.stringify(item, null, 2)}</pre></details>
      `;
      resultsDiv.appendChild(div);
    });
  } catch (err) {
    document.getElementById("status").innerHTML = "‚ö†Ô∏è Gagal mengambil data: " + err.message;
  }
}
</script>
</body>
</html>
