<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>VirtuSIM Indo Only</title>
  <style>
    body {
      background-color: #111;
      color: #fff;
      font-family: Arial, sans-serif;
      padding: 20px;
    }
    input, select, button {
      padding: 10px;
      margin: 6px 0;
      width: 100%;
      border-radius: 5px;
      border: none;
      font-size: 14px;
    }
    button {
      background: #00ffaa;
      color: #000;
      font-weight: bold;
      cursor: pointer;
    }
    .box {
      background: #222;
      padding: 15px;
      border-radius: 10px;
      margin-top: 15px;
    }
  </style>
</head>
<body>

<h2>üì± VirtuSIM Panel üáÆüá© Nomor Indonesia</h2>

<input type="text" id="apiKey" placeholder="üîë API Key kamu" value="HD5wAdt9gkfuB8K7XmUbhYeVZNlQ0R">
<button onclick="cekSaldo()">üí∞ Cek Saldo</button>
<div id="saldo" class="box">Saldo belum dicek</div>

<hr>

<select id="layanan">
  <option value="92">WhatsApp Indo</option>
  <option value="189">Telegram Indo</option>
  <option value="14">Instagram Indo</option>
</select>

<button onclick="orderNomor()">üì• Order Nomor</button>

<div id="hasil" class="box">Belum ada nomor dipesan</div>

<script>
let orderID = '';
let apiKey = '';

function loading(id, text) {
  document.getElementById(id).innerHTML = `<i>‚è≥ ${text}</i>`;
}

async function cekSaldo() {
  apiKey = document.getElementById("apiKey").value.trim();
  if (!apiKey) return alert("Isi API key dulu!");

  loading('saldo', 'Mengambil saldo...');
  try {
    const res = await fetch(`https://virtusim.com/api/v2/json.php?api_key=${apiKey}&action=balance`);
    const data = await res.json();
    document.getElementById('saldo').innerHTML = data.status ?
      `üí∞ Saldo: <b>${data.balance}</b> coins` :
      `‚ùå Error: ${data.msg}`;
  } catch (e) {
    document.getElementById('saldo').innerHTML = "‚ö†Ô∏è Gagal konek ke server.";
  }
}

async function orderNomor() {
  apiKey = document.getElementById("apiKey").value.trim();
  if (!apiKey) return alert("Isi API key dulu!");
  const service = document.getElementById("layanan").value;

  loading('hasil', 'Memesan nomor...');

  try {
    const res = await fetch(`https://virtusim.com/api/v2/json.php?api_key=${apiKey}&action=order&service=${service}&operator=any`);
    const data = await res.json();

    if (data.status) {
      orderID = data.data.id;
      const nomor = data.data.number;
      document.getElementById('hasil').innerHTML = `
        ‚úÖ Nomor: <b>${nomor}</b><br>
        üÜî Order ID: <b>${orderID}</b><br><br>
        <button onclick="startOTP()">‚ñ∂Ô∏è START Terima OTP</button>
        <button onclick="cekOTP()">üîÑ Cek OTP</button>
        <button onclick="cancel()">‚ùå Cancel</button>
      `;
    } else {
      document.getElementById('hasil').innerHTML = `‚ùå Gagal order: ${data.msg}`;
    }

  } catch (e) {
    document.getElementById('hasil').innerHTML = "‚ö†Ô∏è Gagal konek ke server.";
  }
}

async function startOTP() {
  loading('hasil', 'Mengaktifkan nomor...');
  try {
    const res = await fetch(`https://virtusim.com/api/v2/json.php?api_key=${apiKey}&action=set_status&id=${orderID}&status=1`);
    const data = await res.json();
    document.getElementById('hasil').innerHTML += `<br>‚ñ∂Ô∏è ${data.status ? "Nomor siap menerima OTP!" : "‚ùå Gagal start: " + data.msg}`;
  } catch {
    alert("Gagal konek ke server.");
  }
}

async function cekOTP() {
  try {
    const res = await fetch(`https://virtusim.com/api/v2/json.php?api_key=${apiKey}&action=status&id=${orderID}`);
    const data = await res.json();
    if (data.status && data.data.code) {
      alert("üì© OTP Masuk: " + data.data.code);
    } else {
      alert("‚è≥ OTP belum masuk.");
    }
  } catch {
    alert("Gagal cek OTP.");
  }
}

async function cancel() {
  try {
    const res = await fetch(`https://virtusim.com/api/v2/json.php?api_key=${apiKey}&action=set_status&id=${orderID}&status=8`);
    const data = await res.json();
    document.getElementById('hasil').innerHTML = data.status ?
      "‚ùå Order dibatalkan!" : "‚ùå Gagal cancel: " + data.msg;
  } catch {
    document.getElementById('hasil').innerHTML = "‚ö†Ô∏è Gagal cancel order.";
  }
}
</script>

</body>
</html>
