<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>VirtuSIM Dashboard</title>
  <style>
    body {
      background-color: #111;
      color: #fff;
      font-family: Arial, sans-serif;
      padding: 20px;
    }
    input, select, button {
      padding: 10px;
      margin: 6px;
      border-radius: 5px;
      border: none;
      font-size: 14px;
    }
    input, select {
      width: 280px;
    }
    button {
      background: #00ffcc;
      color: #000;
      font-weight: bold;
      cursor: pointer;
    }
    .box {
      background: #222;
      padding: 15px;
      border-radius: 10px;
      margin-top: 15px;
    }
    a.btn {
      display: inline-block;
      background: #0080ff;
      padding: 10px 15px;
      margin: 10px 0;
      color: white;
      text-decoration: none;
      border-radius: 5px;
      font-weight: bold;
    }
  </style>
</head>
<body>

  <h2>📱 VirtuSIM Web Panel</h2>

  <label>🔑 API Key kamu:</label><br>
  <input type="text" id="apiKey" value="HD5wAdt9gkfuB8K7XmUbhYeVZNlQ0R"><br>

  <button onclick="checkBalance()">💰 Cek Saldo</button>
  <a class="btn" href="https://virtusim.com/account/deposit" target="_blank">💳 Deposit Sekarang</a>

  <div class="box" id="balanceBox">Saldo belum dicek</div>

  <hr>

  <label>📱 Layanan / Service ID:</label><br>
  <input type="text" id="service" placeholder="Contoh: 743 (WA Filipina)"><br>

  <label>🌍 Operator:</label><br>
  <select id="operator">
    <option value="any">Any</option>
  </select><br>

  <button onclick="orderNumber()">📥 Order Nomor</button>

  <div class="box" id="orderBox"></div>

  <script>
    async function checkBalance() {
      const apiKey = document.getElementById("apiKey").value.trim();
      const url = `https://virtusim.com/api/v2/json.php?api_key=${apiKey}&action=balance`;
      const res = await fetch(url);
      const data = await res.json();
      if (data.status) {
        document.getElementById("balanceBox").innerHTML = `💰 Saldo kamu: <b>${data.balance}</b> coins`;
      } else {
        document.getElementById("balanceBox").innerHTML = `❌ Gagal ambil saldo: ${data.msg}`;
      }
    }

    async function orderNumber() {
      const apiKey = document.getElementById("apiKey").value.trim();
      const service = document.getElementById("service").value.trim();
      const operator = document.getElementById("operator").value;
      const url = `https://virtusim.com/api/v2/json.php?api_key=${apiKey}&action=order&service=${service}&operator=${operator}`;

      document.getElementById("orderBox").innerHTML = "⏳ Order sedang diproses...";

      const res = await fetch(url);
      const data = await res.json();

      if (data.status) {
        document.getElementById("orderBox").innerHTML = `
          ✅ Nomor berhasil diorder:<br>
          <b>Nomor:</b> ${data.data.number}<br>
          <b>Order ID:</b> ${data.data.id}<br><br>
          <button onclick="getStatus('${apiKey}', '${data.data.id}')">🔄 Cek OTP</button>
          <button onclick="cancelOrder('${apiKey}', '${data.data.id}')">❌ Cancel Order</button>
        `;
      } else {
        document.getElementById("orderBox").innerHTML = `❌ Gagal order: ${data.msg}`;
      }
    }

    async function getStatus(apiKey, id) {
      const url = `https://virtusim.com/api/v2/json.php?api_key=${apiKey}&action=status&id=${id}`;
      const res = await fetch(url);
      const data = await res.json();
      if (data.status && data.data.code) {
        alert("📨 Kode OTP masuk: " + data.data.code);
      } else {
        alert("⏳ Belum ada OTP masuk. Coba lagi.");
      }
    }

    async function cancelOrder(apiKey, id) {
      const url = `https://virtusim.com/api/v2/json.php?api_key=${apiKey}&action=set_status&id=${id}&status=8`;
      const res = await fetch(url);
      const data = await res.json();
      if (data.status) {
        alert("✅ Order dibatalkan!");
        document.getElementById("orderBox").innerHTML = "";
      } else {
        alert("❌ Gagal cancel: " + data.msg);
      }
    }
  </script>

</body>
</html>
